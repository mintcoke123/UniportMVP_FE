import{u as Se,f as Ie,r as l,i as Me,j as e,H as $e}from"./index-dmivaNDP.js";import{g as ce,a as Pe,b as Re}from"./voteService-BPQRId30.js";import{g as Ve,a as E,l as Ae}from"./matchingRoomService-Dsf0VnUZ.js";const Le=3;function Be(){const I=Se(),{user:o}=Ie(),[O,M]=l.useState([]),[_,W]=l.useState(""),[de,Y]=l.useState(!1),[oe,q]=l.useState(!1),[y,$]=l.useState("chat"),[h,N]=l.useState([]),[c,Z]=l.useState(null),[xe,Q]=l.useState([]),[me,he]=l.useState(!0),[P,D]=l.useState(null),[R,X]=l.useState(null),[V,A]=l.useState(null),ue=s=>s.isJoined===!0||!!o&&s.members.some(t=>t.userId===o.id),d=xe.find(s=>ue(s)&&s.memberCount<Le),[g,L]=l.useState([]),[fe,B]=l.useState(!0),[T,w]=l.useState(null),ge=s=>{const t=parseInt(s.replace(/^room-/,""),10);return Number.isNaN(t)||t<1?void 0:t},ee=T!=null?g.find(s=>s.id===T):g.find(s=>s.status==="started")??g.find(s=>s.status==="full")??g[0],x=ee?ge(ee.id):void 0;l.useEffect(()=>{if(!o||d){L([]),w(null),B(!1);return}B(!0),Ve().then(s=>{if(s.length>0){L(s),w(t=>{const r=s.find(a=>a.status==="started")??s.find(a=>a.status==="full")??s[0];return t&&s.some(a=>a.id===t)?t:r.id});return}return E().then(t=>{const r=t.filter(a=>a.isJoined===!0||!!o&&a.members.some(n=>n.userId===o.id));L(r),w(a=>{if(r.length===0)return null;const n=r.find(i=>i.status==="started")??r.find(i=>i.status==="full")??r[0];return a&&r.some(i=>i.id===a)?a:n.id})})}).catch(()=>E().then(s=>{const t=s.filter(r=>r.isJoined===!0||!!o&&r.members.some(a=>a.userId===o.id));L(t),w(r=>{if(t.length===0)return null;const a=t.find(n=>n.status==="started")??t.find(n=>n.status==="full")??t[0];return r&&t.some(n=>n.id===r)?r:a.id})})).finally(()=>B(!1))},[o?.id,!!d]),l.useEffect(()=>{E().then(s=>{Q(s),he(!1)})},[]),l.useEffect(()=>{if(!d){if(x==null){M([]),N([]),Z(null),A(null);return}A(null),ce(x).then(s=>{M(s),A(null)}).catch(s=>{M([]),A(s?.message??"이 그룹의 멤버가 아닙니다. 해당 채팅방에 참가한 멤버만 읽고 쓸 수 있습니다.")}),Pe(x).then(N),Me(x).then(Z)}},[d,x]);const pe=async s=>{X(s);const t=await Ae(s);X(null),D(null),t.success&&E().then(Q).catch(()=>{})},[be,se]=l.useState(!1),[u,te]=l.useState(null),[je,ae]=l.useState(null),re=l.useRef(null),v=o?.id!=null&&Number(o.id)||0,F=o?.nickname??"나",ye=()=>{re.current?.scrollIntoView({behavior:"smooth"})};l.useEffect(()=>{ye()},[O]);const[G,le]=l.useState(!1),ne=async()=>{const s=_.trim();if(s===""||x==null||G)return;le(!0);const t=await Re(x,s);le(!1),t.success?(W(""),ce(x).then(M).catch(()=>{})):alert(t.message??"메시지 전송에 실패했습니다.")},Ne=()=>{I("/mock-investment")},z=(s,t)=>{N(r=>r.map(a=>{if(a.id!==s)return a;const n=a.votes.findIndex(p=>p.userId===v),i=[...a.votes];n>=0?i[n]={orderId:n+1,userId:v,userName:F,vote:t}:i.push({orderId:i.length+1,userId:v,userName:F,vote:t});const f=i.filter(p=>p.vote==="찬성").length,k=i.filter(p=>p.vote==="반대").length,C=Math.ceil(a.totalMembers/2),K=i.length>=a.totalMembers;let j=a.status;return f>=C?(j="passed",te({...a,votes:i,status:"passed"}),se(!0)):(k>=C||K&&f===k)&&(j="rejected"),{...a,votes:i,status:j}}))},J=(s,t)=>s.votes.filter(r=>r.vote===t).length,U=s=>s.votes.find(r=>r.userId===v)?.vote??null,m=s=>`${s.toLocaleString("ko-KR")}원`,H=s=>`${s>=0?"+":""}${s.toFixed(2)}%`,b=(c?.profitLoss??0)>=0,we=(s,t)=>{const r={id:h.length+1,type:s.action,stockName:s.stockName,proposerId:0,proposerName:t||"알 수 없음",quantity:s.quantity,proposedPrice:s.pricePerShare,reason:s.reason,createdAt:new Date().toISOString().slice(0,16).replace("T"," "),expiresAt:"24시간 후 만료",votes:[],totalMembers:5,status:"ongoing"};N([r,...h]),$("vote")};return e.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[e.jsx($e,{}),e.jsx("main",{className:"flex-1 max-w-7xl mx-auto w-full px-4 sm:px-6 lg:px-8 py-6",children:me?e.jsx("div",{className:"flex justify-center py-16",children:e.jsx("span",{className:"text-gray-500",children:"불러오는 중..."})}):d?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] text-center px-4",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-teal-100 flex items-center justify-center mb-6",children:e.jsx("i",{className:"ri-user-search-line text-4xl text-teal-600","aria-hidden":!0})}),e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"팀원을 매칭중입니다..."}),e.jsxs("p",{className:"text-gray-500 mb-1",children:[e.jsx("span",{className:"font-medium text-gray-700",children:d.name})," ","방에서 팀원이 모일 때까지 잠시만 기다려 주세요."]}),e.jsxs("p",{className:"text-sm text-gray-500 mb-8",children:["현재 ",d.memberCount,"명 / ",d.capacity,"명"]}),e.jsxs("ul",{className:"flex flex-wrap justify-center gap-4 mb-8",children:[d.members.map(s=>e.jsxs("li",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"w-14 h-14 rounded-full bg-teal-500 text-white flex items-center justify-center text-lg font-semibold shrink-0 border-2 border-white shadow","aria-hidden":!0,children:s.nickname.charAt(0)}),e.jsx("span",{className:"text-sm font-medium text-gray-700 mt-2 truncate max-w-[100px]",children:s.nickname})]},s.userId)),Array.from({length:d.capacity-d.members.length}).map((s,t)=>e.jsxs("li",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-14 h-14 rounded-full bg-gray-100 border-2 border-dashed border-gray-300 flex items-center justify-center",children:e.jsx("i",{className:"ri-user-add-line text-2xl text-gray-400","aria-hidden":!0})}),e.jsx("span",{className:"text-sm text-gray-400 mt-2",children:"대기 중"})]},`empty-${t}`))]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:()=>I("/matching-rooms"),className:"py-2.5 px-6 rounded-xl text-sm font-medium border border-gray-300 text-gray-700 hover:bg-gray-50 cursor-pointer transition-colors",children:"매칭방 목록"}),e.jsx("button",{type:"button",onClick:()=>D(d.id),disabled:R===d.id,className:"py-2.5 px-6 rounded-xl text-sm font-medium border border-gray-300 text-gray-700 hover:bg-gray-50 disabled:opacity-50 cursor-pointer transition-colors",children:R===d.id?"처리 중...":"방 나가기"})]})]}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[minmax(0,0.9fr)_minmax(0,1.1fr)] gap-6 lg:h-[calc(100vh-6rem)] min-h-[24rem]",children:[e.jsxs("div",{className:"flex flex-col bg-white rounded-2xl border border-gray-200 shadow-sm overflow-hidden min-h-0 order-2 lg:order-1",children:[e.jsx("div",{className:"flex-shrink-0 px-4 py-3 border-b border-gray-200",children:e.jsxs("h2",{className:"text-base font-bold text-gray-900 flex items-center gap-2",children:[e.jsx("i",{className:"ri-pie-chart-line text-teal-500"}),"팀 투자 현황"]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto min-h-0 p-4 space-y-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-teal-500 to-teal-600 rounded-xl p-4 text-white",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("i",{className:"ri-wallet-3-line text-xl"}),e.jsx("h3",{className:"text-sm font-bold",children:"투자 요약"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-teal-100",children:"투자 원금"}),e.jsx("span",{className:"font-bold",children:m(c?.investmentAmount??0)})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-teal-100",children:"현재 평가액"}),e.jsx("span",{className:"font-bold",children:m(c?.totalValue??0)})]}),e.jsxs("div",{className:"border-t border-teal-400 pt-2 flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-teal-100",children:"총 손익"}),e.jsxs("div",{className:"text-right",children:[e.jsxs("span",{className:`font-bold ${b?"text-yellow-300":"text-red-200"}`,children:[b?"+":"",m(c?.profitLoss??0)]}),e.jsx("span",{className:`text-xs ml-1 ${b?"text-yellow-300":"text-red-200"}`,children:H(c?.profitLossPercentage??0)})]})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-200",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-900 mb-3",children:"포트폴리오 구성"}),e.jsx("div",{className:"flex items-center justify-center mb-3",children:e.jsxs("svg",{viewBox:"0 0 200 200",className:"w-28 h-28",children:[(c?.holdings??[]).map((s,t)=>{const r=c?.holdings??[],a=r.reduce((S,Ce)=>S+Ce.currentValue,0);let n=0;for(let S=0;S<t;S++)n+=r[S].currentValue/a*360;const i=s.currentValue/a*360,f=n+i,k=(n-90)*Math.PI/180,C=(f-90)*Math.PI/180,K=100+80*Math.cos(k),j=100+80*Math.sin(k),p=100+80*Math.cos(C),ve=100+80*Math.sin(C),ke=i>180?1:0,ie=["#14B8A6","#06B6D4","#8B5CF6","#EC4899","#F59E0B","#10B981"];return e.jsx("path",{d:`M 100 100 L ${K} ${j} A 80 80 0 ${ke} 1 ${p} ${ve} Z`,fill:ie[t%ie.length],opacity:"0.9"},s.id)}),e.jsx("circle",{cx:"100",cy:"100",r:"50",fill:"white"})]})}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:(c?.holdings??[]).map((s,t)=>{const r=["bg-teal-500","bg-cyan-500","bg-purple-500","bg-pink-500","bg-amber-500","bg-green-500"],a=(c?.holdings??[]).reduce((i,f)=>i+f.currentValue,0),n=a>0?(s.currentValue/a*100).toFixed(1):"0";return e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:`w-2.5 h-2.5 rounded-full ${r[t%r.length]}`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-medium text-gray-900 truncate",children:s.stockName}),e.jsxs("p",{className:"text-xs text-gray-500",children:[n,"%"]})]})]},s.id)})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-900",children:"보유 종목"}),(c?.holdings??[]).map(s=>{const t=s.currentValue-s.averagePrice*s.quantity,r=t/(s.averagePrice*s.quantity)*100,a=t>=0,n=je===s.id;return e.jsxs("div",{onClick:()=>ae(n?null:s.id),className:`rounded-xl p-3 border transition-all cursor-pointer ${n?"border-teal-500 ring-2 ring-teal-200 bg-teal-50":"border-gray-200 bg-white hover:border-gray-300"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("h4",{className:"text-sm font-bold text-gray-900 truncate",children:s.stockName}),e.jsxs("span",{className:"text-xs text-gray-500",children:[s.quantity,"주 ·"," ",m(s.currentPrice)]})]}),e.jsx("p",{className:`text-xs font-semibold flex-shrink-0 ml-2 ${a?"text-green-600":"text-red-600"}`,children:H(r)})]}),n&&e.jsxs("button",{onClick:i=>{i.stopPropagation();const f={id:h.length+1,type:"매도",stockName:s.stockName,proposerId:v,proposerName:F,quantity:s.quantity,proposedPrice:s.currentPrice,reason:`${s.stockName} 전량 시장가 매도 제안입니다. 현재 보유 수량 ${s.quantity}주를 모두 처분하고자 합니다.`,createdAt:new Date().toISOString().slice(0,16).replace("T"," "),expiresAt:"24시간 후 만료",votes:[],totalMembers:5,status:"ongoing"};N([f,...h]),ae(null),$("vote")},className:"w-full py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white text-xs font-bold rounded-lg hover:from-blue-600 hover:to-blue-700 cursor-pointer",children:[e.jsx("i",{className:"ri-arrow-down-line mr-1"}),"처분 투표 생성"]})]},s.id)})]})]})]}),e.jsxs("div",{className:"flex flex-col min-h-0 order-1 lg:order-2",children:[e.jsxs("header",{className:"flex-none shrink-0 px-4 py-3 flex flex-wrap items-center justify-between gap-3 bg-teal-50 border border-gray-200 border-b-0 rounded-t-2xl rounded-b-none shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[e.jsx("span",{className:"text-sm font-bold text-gray-800 shrink-0",children:"채팅 · 투표"}),g.length>1&&e.jsx("select",{value:T??"",onChange:s=>w(s.target.value||null),className:"text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg px-3 py-1.5 cursor-pointer focus:outline-none focus:ring-2 focus:ring-teal-500 min-w-0 max-w-[12rem]","aria-label":"채팅방 선택",children:g.map(s=>e.jsxs("option",{value:s.id,children:[s.name," (",s.memberCount,"/",s.capacity,")"]},s.id))})]}),e.jsxs("div",{className:"flex bg-white rounded-full p-1 shadow border border-gray-300 flex-1 min-w-0 max-w-[14rem]",children:[e.jsxs("button",{type:"button",onClick:()=>$("chat"),className:`flex-1 py-2 px-3 rounded-full text-sm font-medium transition-colors cursor-pointer whitespace-nowrap ${y==="chat"?"bg-teal-500 text-white shadow-sm":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"}`,children:[e.jsx("i",{className:"ri-chat-3-line mr-1","aria-hidden":!0}),"채팅"]}),e.jsxs("button",{type:"button",onClick:()=>$("vote"),className:`flex-1 py-2 px-3 rounded-full text-sm font-medium transition-colors cursor-pointer whitespace-nowrap flex items-center justify-center gap-1 ${y==="vote"?"bg-teal-500 text-white shadow-sm":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"}`,children:[e.jsx("i",{className:"ri-checkbox-circle-line","aria-hidden":!0}),"투표",h.filter(s=>s.status==="ongoing").length>0&&e.jsx("span",{className:`ml-1 px-1.5 py-0.5 text-xs rounded-full ${y==="vote"?"bg-white/20 text-white":"bg-red-500 text-white"}`,children:h.filter(s=>s.status==="ongoing").length})]})]}),e.jsx("button",{type:"button",onClick:()=>q(!0),className:"text-sm text-teal-600 hover:text-teal-700 font-semibold whitespace-nowrap py-1 px-2",children:"채팅방 정보"})]}),e.jsxs("div",{className:"flex flex-col flex-1 min-h-0 w-full overflow-hidden bg-white rounded-b-2xl rounded-t-none border border-t-0 border-gray-200 shadow-sm",children:[y==="chat"&&e.jsxs(e.Fragment,{children:[V&&e.jsx("div",{className:"flex-shrink-0 px-4 py-3 bg-amber-50 border-b border-amber-200",children:e.jsx("p",{className:"text-sm text-amber-800",children:V})}),e.jsxs("div",{className:"flex-1 min-h-0 overflow-y-auto overflow-x-hidden px-4 py-3 space-y-4",children:[O.map(s=>e.jsxs("div",{children:[s.type==="user"&&e.jsxs("div",{className:"flex gap-3",children:[e.jsx("span",{className:"w-10 h-10 rounded-full bg-teal-500 text-white flex items-center justify-center text-sm font-semibold shrink-0","aria-hidden":!0,children:s.userNickname.charAt(0)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:s.userNickname}),e.jsx("span",{className:"text-xs text-gray-400",children:s.timestamp})]}),e.jsx("div",{className:"bg-white rounded-2xl rounded-tl-sm px-4 py-3 shadow-sm border border-gray-100 inline-block max-w-xl",children:e.jsx("p",{className:"text-sm text-gray-800 whitespace-pre-wrap",children:s.message})})]})]}),s.type==="trade"&&s.tradeData&&e.jsxs("div",{className:"flex gap-3",children:[e.jsx("span",{className:"w-10 h-10 rounded-full bg-teal-500 text-white flex items-center justify-center text-sm font-semibold shrink-0","aria-hidden":!0,children:s.userNickname.charAt(0)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:s.userNickname}),e.jsx("span",{className:"text-xs text-gray-400",children:s.timestamp})]}),e.jsxs("div",{onClick:()=>we(s.tradeData,s.userNickname||""),className:"bg-gradient-to-br from-teal-50 to-teal-100 rounded-2xl rounded-tl-sm p-4 shadow-sm border border-teal-200 max-w-xl cursor-pointer hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"flex items-center gap-2 mb-3",children:e.jsxs("div",{className:`px-3 py-1 rounded-full text-xs font-bold ${s.tradeData.action==="매수"?"bg-red-500 text-white":"bg-blue-500 text-white"}`,children:[s.tradeData.action," 계획"]})}),e.jsxs("div",{className:"space-y-2 mb-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"종목"}),e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:s.tradeData.stockName})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"수량"}),e.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:[s.tradeData.quantity,"주"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"희망 가격"}),e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:m(s.tradeData.pricePerShare)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"주문 금액"}),e.jsx("span",{className:"text-sm font-bold text-teal-600",children:m(s.tradeData.totalAmount)})]})]}),e.jsx("div",{className:"border-t border-teal-200 pt-3 mb-3",children:e.jsx("p",{className:"text-sm text-gray-700",children:s.tradeData.reason})}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.tradeData.tags.map((t,r)=>e.jsx("span",{className:"px-2 py-1 bg-white text-teal-600 text-xs font-medium rounded-full",children:t},r))})]})]})]})]},s.id)),e.jsx("div",{ref:re})]}),e.jsx("div",{className:"flex-shrink-0 border-t border-gray-200 p-4",children:e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:Ne,className:"w-full py-2.5 mb-2 bg-gradient-to-r from-red-500 to-pink-500 text-white text-sm font-bold rounded-xl hover:from-red-600 hover:to-pink-600 cursor-pointer flex items-center justify-center gap-2",children:[e.jsx("i",{className:"ri-stock-line"}),"매수/매도 계획 공유"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:_,onChange:s=>W(s.target.value),onKeyPress:s=>s.key==="Enter"&&ne(),placeholder:x==null?g.length===0&&!fe?"참가 중인 채팅방이 없습니다. 매칭방에서 팀에 참가해 주세요.":"채팅방 정보를 불러오는 중...":"메시지 입력...",disabled:x==null||G||!!V,className:"flex-1 px-3 py-2.5 bg-gray-100 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-teal-500 disabled:opacity-60 disabled:cursor-not-allowed"}),e.jsx("button",{type:"button",onClick:ne,disabled:x==null||G||!!V,className:"w-10 h-10 bg-teal-500 rounded-xl flex items-center justify-center hover:bg-teal-600 cursor-pointer transition-colors flex-shrink-0 disabled:opacity-60 disabled:cursor-not-allowed",children:e.jsx("i",{className:"ri-send-plane-fill text-white text-lg"})})]})]})})]}),y==="vote"&&e.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto overflow-x-hidden p-4 space-y-3",children:h.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("i",{className:"ri-checkbox-circle-line text-4xl text-gray-300 mb-2"}),e.jsx("p",{className:"text-sm text-gray-500",children:"진행 중인 투표가 없습니다"})]}):e.jsx("div",{className:"space-y-3",children:h.map(s=>e.jsxs("div",{className:`rounded-xl p-4 border ${s.status==="passed"?"border-green-300 bg-green-50":s.status==="rejected"?"border-red-300 bg-red-50":"border-gray-200 bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx("span",{className:"w-8 h-8 rounded-full bg-teal-500 text-white flex items-center justify-center text-sm font-semibold shrink-0","aria-hidden":!0,children:s.proposerName.charAt(0)}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-900 block truncate",children:s.proposerName}),e.jsx("span",{className:"text-xs text-gray-500",children:s.expiresAt})]})]}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-bold flex-shrink-0 ${s.type==="매수"?"bg-red-100 text-red-600":"bg-blue-100 text-blue-600"}`,children:s.type})]}),e.jsxs("div",{className:"bg-white/80 rounded-lg p-3 mb-2",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-900 truncate",children:s.stockName}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-600 mt-1",children:[e.jsxs("span",{children:[s.quantity,"주"]}),e.jsx("span",{children:m(s.proposedPrice)})]}),e.jsx("p",{className:"text-xs text-gray-600 mt-1 line-clamp-2",children:s.reason})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2 text-xs flex-wrap",children:[e.jsxs("span",{className:"text-green-600 font-medium",children:["찬성 ",J(s,"찬성")]}),e.jsxs("span",{className:"text-red-600 font-medium",children:["반대 ",J(s,"반대")]}),e.jsxs("span",{className:"text-gray-500 font-medium",children:["보류 ",J(s,"보류")]}),e.jsxs("span",{className:"text-gray-400",children:[s.votes.length,"/",s.totalMembers]})]}),s.status==="ongoing"?e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>z(s.id,"찬성"),className:`flex-1 py-2 rounded-lg text-xs font-bold cursor-pointer ${U(s)==="찬성"?"bg-green-500 text-white":"bg-green-100 text-green-600 hover:bg-green-200"}`,children:"찬성"}),e.jsx("button",{onClick:()=>z(s.id,"보류"),className:`flex-1 py-2 rounded-lg text-xs font-bold cursor-pointer ${U(s)==="보류"?"bg-gray-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"보류"}),e.jsx("button",{onClick:()=>z(s.id,"반대"),className:`flex-1 py-2 rounded-lg text-xs font-bold cursor-pointer ${U(s)==="반대"?"bg-red-500 text-white":"bg-red-100 text-red-600 hover:bg-red-200"}`,children:"반대"})]}):e.jsx("div",{className:`py-2 rounded-lg text-xs font-bold text-center ${s.status==="passed"?"bg-green-500 text-white":s.status==="rejected"?"bg-red-500 text-white":"bg-gray-300 text-gray-600"}`,children:s.status==="passed"?"✓ 통과":s.status==="rejected"?"✗ 부결":"만료"})]},s.id))})})]})]})]})})}),P&&d&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-md p-6",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-amber-100 flex items-center justify-center mx-auto mb-4",children:e.jsx("i",{className:"ri-error-warning-line text-2xl text-amber-600","aria-hidden":!0})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 text-center mb-2",children:"방에서 나가시겠습니까?"}),e.jsx("p",{className:"text-sm text-gray-500 text-center mb-6",children:"나가시면 해당 방의 팀원 매칭에서 제외됩니다."}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:()=>D(null),className:"flex-1 py-2.5 rounded-xl text-sm font-medium border border-gray-300 text-gray-700 hover:bg-gray-50 cursor-pointer",children:"취소"}),e.jsx("button",{type:"button",onClick:()=>pe(P),disabled:R===P,className:"flex-1 py-2.5 rounded-xl text-sm font-semibold bg-amber-500 text-white hover:bg-amber-600 disabled:opacity-50 cursor-pointer",children:R===P?"처리 중...":"나가기"})]})]})}),de&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-5",children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-md w-full p-6 shadow-xl",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"매수/매도 계획 공유"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"모의투자 페이지에서 매수/매도 계획을 작성하고 공유할 수 있습니다."}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>Y(!1),className:"flex-1 py-3 bg-gray-200 text-gray-700 text-sm font-medium rounded-xl hover:bg-gray-300 cursor-pointer whitespace-nowrap transition-colors",children:"닫기"}),e.jsx("button",{onClick:()=>{Y(!1),I("/mock-investment")},className:"flex-1 py-3 bg-teal-500 text-white text-sm font-bold rounded-xl hover:bg-teal-600 cursor-pointer whitespace-nowrap transition-colors",children:"모의투자로 이동"})]})]})}),be&&u&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-5",children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-md w-full p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("i",{className:"ri-checkbox-circle-fill text-4xl text-green-500"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"투표 통과!"}),e.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["과반수 찬성으로"," ",e.jsx("span",{className:"font-bold",children:u.stockName})," ",u.type," 주문이 체결되었습니다."]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 mb-4",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"종목"}),e.jsx("span",{className:"text-sm font-semibold",children:u.stockName})]}),e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"유형"}),e.jsx("span",{className:`text-sm font-semibold ${u.type==="매수"?"text-red-600":"text-blue-600"}`,children:u.type})]}),e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"수량"}),e.jsxs("span",{className:"text-sm font-semibold",children:[u.quantity,"주"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"체결가"}),e.jsx("span",{className:"text-sm font-semibold",children:m(u.proposedPrice)})]})]}),e.jsx("button",{onClick:()=>{se(!1),te(null)},className:"w-full py-3 bg-teal-500 text-white text-sm font-bold rounded-xl hover:bg-teal-600 cursor-pointer whitespace-nowrap transition-colors",children:"확인"})]})}),oe&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-5",children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-lg w-full p-6 shadow-xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"채팅방 정보"}),e.jsx("button",{onClick:()=>q(!1),className:"w-8 h-8 flex items-center justify-center cursor-pointer",children:e.jsx("i",{className:"ri-close-line text-xl text-gray-700"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b border-gray-200",children:[e.jsx("span",{className:"w-16 h-16 rounded-full bg-teal-500 text-white flex items-center justify-center text-xl font-bold shrink-0","aria-hidden":!0,children:(c?.groupName??"").charAt(0)}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-base font-bold text-gray-900",children:c?.groupName??"-"}),e.jsx("span",{className:"text-sm text-gray-500",children:"멤버 5명"})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-teal-50 to-teal-100 rounded-xl p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("i",{className:"ri-wallet-3-line text-teal-600 text-lg"}),e.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"팀 투자 현황"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"팀 투자금(실시간)"}),e.jsx("span",{className:"text-base font-bold text-gray-900",children:m(c?.investmentAmount??0)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"전체 자산"}),e.jsx("span",{className:"text-base font-bold text-gray-900",children:m(c?.totalValue??0)})]}),e.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-teal-200",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"투자 손익"}),e.jsxs("div",{className:"text-right",children:[e.jsxs("span",{className:`text-base font-bold ${b?"text-green-600":"text-red-600"}`,children:[b?"+":"",m(c?.profitLoss??0)]}),e.jsx("span",{className:`text-xs ml-2 ${b?"text-green-600":"text-red-600"}`,children:H(c?.profitLossPercentage??0)})]})]})]})]}),e.jsx("button",{onClick:()=>{q(!1),I("/group-portfolio")},className:"w-full py-3 bg-teal-500 text-white text-sm font-bold rounded-xl hover:bg-teal-600 cursor-pointer whitespace-nowrap transition-colors",children:"그룹 포트폴리오 보기"})]})]})})]})}export{Be as default};
//# sourceMappingURL=page-LJwEFY8Y.js.map
