{"version":3,"file":"page-CLP7GmFB.js","sources":["../../src/pages/matching-rooms/page.tsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport Header from \"../../components/feature/Header\";\nimport { useAuth } from \"../../contexts/AuthContext\";\nimport {\n  getMatchingRooms,\n  createMatchingRoom,\n  joinMatchingRoom,\n  leaveMatchingRoom,\n  startMatchingRoom,\n} from \"../../services\";\nimport type { MatchingRoom } from \"../../types\";\n\nconst CAPACITY = 3;\n\nexport default function MatchingRoomsPage() {\n  const navigate = useNavigate();\n  const { updateUserTeam, user } = useAuth();\n  const [rooms, setRooms] = useState<MatchingRoom[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [actionRoomId, setActionRoomId] = useState<string | null>(null);\n  const [showCreateModal, setShowCreateModal] = useState(false);\n  const [newRoomName, setNewRoomName] = useState(\"\");\n  const [creating, setCreating] = useState(false);\n  /** 나가기 확인 모달에 표시할 방 id (null이면 모달 비표시) */\n  const [leaveConfirmRoomId, setLeaveConfirmRoomId] = useState<string | null>(\n    null\n  );\n\n  useEffect(() => {\n    getMatchingRooms().then((list) => {\n      setRooms(list);\n      setLoading(false);\n    });\n  }, []);\n\n  const handleJoin = async (roomId: string) => {\n    if (!user) return;\n    if (hasTeam) {\n      alert(\"이미 팀에 소속되어 있어 다른 방에 참가할 수 없습니다.\");\n      return;\n    }\n    if (hasJoinedRoom) {\n      alert(\"이미 참가 중인 방이 있습니다. 다른 방에 참가하려면 먼저 해당 방에서 나가세요.\");\n      return;\n    }\n    setActionRoomId(roomId);\n    const result = await joinMatchingRoom(roomId, {\n      id: user.id,\n      nickname: user.nickname,\n    });\n    setActionRoomId(null);\n    if (result.success) {\n      // 백엔드 join 응답의 room은 id, memberCount만 옴. 기존 room에 병합해 members/name/status/capacity 유지(렌더 크래시 방지).\n      if (result.room) {\n        setRooms((prev) =>\n          prev.map((r) =>\n            r.id === result.room!.id\n              ? { ...r, ...result.room!, isJoined: true } as MatchingRoom\n              : r\n          )\n        );\n      }\n      // 서버 목록으로 다시 불러오기. 실패 시 mock으로 덮어쓰지 않음\n      getMatchingRooms()\n        .then(setRooms)\n        .catch(() => {});\n    } else {\n      alert(result.message);\n    }\n  };\n\n  const handleLeave = async (roomId: string) => {\n    setActionRoomId(roomId);\n    const result = await leaveMatchingRoom(roomId);\n    setActionRoomId(null);\n    setLeaveConfirmRoomId(null);\n    if (result.success) {\n      getMatchingRooms()\n        .then(setRooms)\n        .catch(() => {});\n    }\n  };\n\n  const openLeaveConfirm = (roomId: string) => setLeaveConfirmRoomId(roomId);\n  const closeLeaveConfirm = () => setLeaveConfirmRoomId(null);\n\n  const handleStart = async (roomId: string) => {\n    setActionRoomId(roomId);\n    const result = await startMatchingRoom(roomId);\n    setActionRoomId(null);\n    if (result.success) {\n      const teamIdToSet =\n        result.teamId ??\n        (result.groupId != null ? String(result.groupId) : null);\n      if (teamIdToSet) updateUserTeam(teamIdToSet);\n      navigate(\"/mock-investment\");\n    }\n  };\n\n  const handleCreateRoom = async () => {\n    if (hasTeam) {\n      alert(\"이미 팀에 소속되어 있어 새 방을 만들 수 없습니다.\");\n      return;\n    }\n    if (hasJoinedRoom) {\n      alert(\"이미 참가 중인 방이 있습니다. 새 방을 만들려면 먼저 방을 나가세요.\");\n      return;\n    }\n    setCreating(true);\n    const result = await createMatchingRoom(newRoomName.trim() || undefined);\n    setCreating(false);\n    if (result.success) {\n      setShowCreateModal(false);\n      setNewRoomName(\"\");\n      // 백엔드가 만든 방을 주면 즉시 목록에 추가\n      if (result.room) {\n        setRooms((prev) => [{ ...result.room!, isJoined: true }, ...prev]);\n      }\n      getMatchingRooms()\n        .then(setRooms)\n        .catch(() => {});\n    } else {\n      alert(result.message);\n    }\n  };\n\n  const isFull = (room: MatchingRoom) => room.memberCount >= CAPACITY;\n  /** API의 isJoined 사용, 없으면 members에 내가 있는지로 판단 (mock 폴백) */\n  const isInRoom = (room: MatchingRoom) =>\n    room.isJoined === true ||\n    (Boolean(user) && room.members.some((m) => m.userId === user!.id));\n\n  /** 내가 참가한 방 중 멤버가 부족한 방(2명 이하) — 이 경우 대기 페이지 표시 */\n  const myWaitingRoom = rooms.find(\n    (room) => isInRoom(room) && room.memberCount < CAPACITY\n  );\n  /** 이미 참가 중인 방이 하나라도 있으면 방 만들기 불가 (백엔드 400과 동일 규칙) */\n  const hasJoinedRoom = rooms.some((room) => isInRoom(room));\n  /** 이미 팀에 소속됨(모의투자 시작 후) — 다른 방 참가·방 만들기 불가 */\n  const hasTeam = Boolean(user?.teamId);\n  /** 다른 방에 참가 가능 여부: 어떤 방에도 참가하지 않았고, 팀도 없을 때만 참가 가능 */\n  const canJoinAnotherRoom = !hasJoinedRoom && !hasTeam;\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <Header />\n\n      <main className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        {/* 팀원 매칭 대기 중일 때: 채팅에서 대기하도록 안내 */}\n        {!loading && myWaitingRoom && (\n          <div className=\"mb-6 p-4 bg-teal-50 border border-teal-200 rounded-2xl flex flex-wrap items-center justify-between gap-4\">\n            <p className=\"text-sm text-gray-700\">\n              <span className=\"font-semibold text-teal-700\">\n                {myWaitingRoom.name}\n              </span>\n              방에서 팀원을 기다리는 중입니다. 채팅 화면에서 대기할 수 있습니다.\n            </p>\n            <button\n              type=\"button\"\n              onClick={() => navigate(\"/chat\")}\n              className=\"py-2.5 px-5 rounded-xl text-sm font-semibold bg-teal-500 text-white hover:bg-teal-600 cursor-pointer transition-colors flex items-center gap-2\"\n            >\n              <i className=\"ri-chat-3-line text-lg\" aria-hidden />\n              채팅에서 대기하기\n            </button>\n          </div>\n        )}\n\n        {loading ? (\n          <div className=\"flex justify-center py-16\">\n            <span className=\"text-gray-500\">목록 불러오는 중...</span>\n          </div>\n        ) : (\n          <>\n            <div className=\"flex items-center justify-between mb-6\">\n              <h1 className=\"text-xl font-bold text-gray-900\">매칭방 목록</h1>\n              <button\n                type=\"button\"\n                onClick={() =>\n                  !hasJoinedRoom && !hasTeam && setShowCreateModal(true)\n                }\n                disabled={hasJoinedRoom || hasTeam}\n                title={\n                  hasTeam\n                    ? \"이미 팀에 소속되어 있어 새 방을 만들 수 없습니다.\"\n                    : hasJoinedRoom\n                      ? \"이미 참가 중인 방이 있습니다. 새 방을 만들려면 먼저 방을 나가세요.\"\n                      : undefined\n                }\n                className=\"py-2.5 px-5 rounded-xl text-sm font-semibold bg-teal-500 text-white hover:bg-teal-600 cursor-pointer transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-teal-500\"\n              >\n                <i className=\"ri-add-line text-lg\" aria-hidden />방 만들기\n              </button>\n            </div>\n            {rooms.length === 0 ? (\n              <div className=\"bg-white rounded-2xl border border-gray-200 p-12 text-center\">\n                <p className=\"text-gray-500\">진행 중인 매칭방이 없습니다.</p>\n                <p className=\"text-sm text-gray-400 mt-2\">\n                  새 매칭방이 생성되면 여기에 표시됩니다.\n                </p>\n                <button\n                  type=\"button\"\n                  onClick={() =>\n                    !hasJoinedRoom && !hasTeam && setShowCreateModal(true)\n                  }\n                  disabled={hasJoinedRoom || hasTeam}\n                  title={\n                    hasTeam\n                      ? \"이미 팀에 소속되어 있어 새 방을 만들 수 없습니다.\"\n                      : hasJoinedRoom\n                        ? \"이미 참가 중인 방이 있습니다. 새 방을 만들려면 먼저 방을 나가세요.\"\n                        : undefined\n                  }\n                  className=\"mt-4 py-2.5 px-5 rounded-xl text-sm font-semibold bg-teal-500 text-white hover:bg-teal-600 cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed\"\n                >\n                  방 만들기\n                </button>\n              </div>\n            ) : (\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n                {rooms.map((room) => {\n                  const full = isFull(room);\n                  const busy = actionRoomId === room.id;\n                  return (\n                    <div\n                      key={room.id}\n                      className=\"bg-white rounded-2xl border border-gray-200 shadow-sm overflow-hidden\"\n                    >\n                      <div className=\"p-5 border-b border-gray-100\">\n                        <h2 className=\"text-lg font-bold text-gray-900 truncate\">\n                          {room.name}\n                        </h2>\n                        <p className=\"text-sm text-gray-500 mt-1\">\n                          멤버 {room.memberCount}/{room.capacity}명\n                          {room.status === \"full\" && (\n                            <span className=\"ml-2 text-teal-600 font-medium\">\n                              · 모의투자 시작 가능\n                            </span>\n                          )}\n                          {room.status === \"started\" && (\n                            <span className=\"ml-2 text-gray-500\">\n                              · 진행 중\n                            </span>\n                          )}\n                        </p>\n                      </div>\n\n                      <div className=\"p-5\">\n                        <p className=\"text-xs font-medium text-gray-500 mb-3\">\n                          멤버\n                        </p>\n                        <ul className=\"space-y-3\">\n                          {room.members.map((member) => (\n                            <li\n                              key={member.userId}\n                              className=\"flex items-center gap-3\"\n                            >\n                              <span\n                                className=\"w-10 h-10 rounded-full bg-teal-500 text-white flex items-center justify-center text-sm font-semibold shrink-0\"\n                                aria-hidden\n                              >\n                                {member.nickname.charAt(0)}\n                              </span>\n                              <div className=\"min-w-0 flex-1\">\n                                <p className=\"text-sm font-medium text-gray-900 truncate\">\n                                  {member.nickname}\n                                </p>\n                              </div>\n                            </li>\n                          ))}\n                          {room.members.length < room.capacity &&\n                            Array.from({\n                              length: room.capacity - room.members.length,\n                            }).map((_, i) => (\n                              <li\n                                key={`empty-${i}`}\n                                className=\"flex items-center gap-3\"\n                              >\n                                <div className=\"w-10 h-10 rounded-full bg-gray-100 border-2 border-dashed border-gray-200 flex-shrink-0 flex items-center justify-center\">\n                                  <span className=\"text-xs text-gray-400\">\n                                    빈 자리\n                                  </span>\n                                </div>\n                                <p className=\"text-sm text-gray-400\">대기 중</p>\n                              </li>\n                            ))}\n                        </ul>\n                      </div>\n\n                      <div className=\"p-5 pt-0 flex gap-2\">\n                        {room.status === \"started\" ? (\n                          <button\n                            type=\"button\"\n                            disabled\n                            className=\"flex-1 py-2.5 rounded-xl text-sm font-medium bg-gray-100 text-gray-500 cursor-not-allowed\"\n                          >\n                            진행 중\n                          </button>\n                        ) : full ? (\n                          isInRoom(room) ? (\n                            <>\n                              <button\n                                type=\"button\"\n                                onClick={() => handleStart(room.id)}\n                                disabled={busy}\n                                className=\"flex-1 py-2.5 rounded-xl text-sm font-bold bg-teal-500 text-white hover:bg-teal-600 disabled:opacity-50 cursor-pointer transition-colors\"\n                              >\n                                {busy ? \"처리 중...\" : \"모의투자 시작\"}\n                              </button>\n                              <button\n                                type=\"button\"\n                                onClick={() => openLeaveConfirm(room.id)}\n                                disabled={busy}\n                                className=\"py-2.5 px-4 rounded-xl text-sm font-medium border border-gray-300 text-gray-700 hover:bg-gray-50 disabled:opacity-50 cursor-pointer transition-colors\"\n                              >\n                                나가기\n                              </button>\n                            </>\n                          ) : (\n                            <button\n                              type=\"button\"\n                              disabled\n                              className=\"w-full py-2.5 rounded-xl text-sm font-medium bg-gray-100 text-gray-400 cursor-not-allowed\"\n                              title=\"방이 가득 찼습니다\"\n                            >\n                              참가 불가 (3/3)\n                            </button>\n                          )\n                        ) : isInRoom(room) ? (\n                          <>\n                            <button\n                              type=\"button\"\n                              onClick={() => navigate(\"/chat\")}\n                              className=\"flex-1 py-2.5 rounded-xl text-sm font-medium border border-teal-500 text-teal-600 hover:bg-teal-50 cursor-pointer transition-colors flex items-center justify-center gap-1.5\"\n                            >\n                              <i\n                                className=\"ri-chat-3-line text-base\"\n                                aria-hidden\n                              />\n                              채팅에서 대기\n                            </button>\n                            <button\n                              type=\"button\"\n                              onClick={() => openLeaveConfirm(room.id)}\n                              disabled={busy}\n                              className=\"py-2.5 px-4 rounded-xl text-sm font-medium border border-gray-300 text-gray-700 hover:bg-gray-50 disabled:opacity-50 cursor-pointer transition-colors\"\n                            >\n                              나가기\n                            </button>\n                          </>\n                        ) : (\n                          <button\n                            type=\"button\"\n                            onClick={() => handleJoin(room.id)}\n                            disabled={busy || !canJoinAnotherRoom}\n                            title={\n                              hasTeam\n                                ? \"이미 팀에 소속되어 있어 다른 방에 참가할 수 없습니다.\"\n                                : hasJoinedRoom\n                                  ? \"이미 참가 중인 방이 있습니다. 나간 뒤 참가할 수 있습니다.\"\n                                  : undefined\n                            }\n                            className=\"w-full py-2.5 rounded-xl text-sm font-bold bg-teal-500 text-white hover:bg-teal-600 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer transition-colors\"\n                          >\n                            {busy\n                              ? \"처리 중...\"\n                              : !canJoinAnotherRoom\n                                ? (hasTeam ? \"다른 팀 참가 불가\" : \"참가 불가\")\n                                : \"참가하기\"}\n                          </button>\n                        )}\n                      </div>\n                    </div>\n                  );\n                })}\n              </div>\n            )}\n          </>\n        )}\n\n        {/* 방 나가기 확인 모달 */}\n        {leaveConfirmRoomId && (\n          <div className=\"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4\">\n            <div className=\"bg-white rounded-2xl shadow-xl w-full max-w-md p-6\">\n              <div className=\"w-12 h-12 rounded-full bg-amber-100 flex items-center justify-center mx-auto mb-4\">\n                <i\n                  className=\"ri-error-warning-line text-2xl text-amber-600\"\n                  aria-hidden\n                />\n              </div>\n              <h3 className=\"text-lg font-bold text-gray-900 text-center mb-2\">\n                방에서 나가시겠습니까?\n              </h3>\n              <p className=\"text-sm text-gray-500 text-center mb-6\">\n                나가시면 해당 방의 팀원 매칭에서 제외됩니다. 다시 참가하려면\n                방에 새로 참가해야 합니다.\n              </p>\n              <div className=\"flex gap-3\">\n                <button\n                  type=\"button\"\n                  onClick={closeLeaveConfirm}\n                  className=\"flex-1 py-2.5 rounded-xl text-sm font-medium border border-gray-300 text-gray-700 hover:bg-gray-50 cursor-pointer\"\n                >\n                  취소\n                </button>\n                <button\n                  type=\"button\"\n                  onClick={() => handleLeave(leaveConfirmRoomId)}\n                  disabled={actionRoomId === leaveConfirmRoomId}\n                  className=\"flex-1 py-2.5 rounded-xl text-sm font-semibold bg-amber-500 text-white hover:bg-amber-600 disabled:opacity-50 cursor-pointer\"\n                >\n                  {actionRoomId === leaveConfirmRoomId\n                    ? \"처리 중...\"\n                    : \"나가기\"}\n                </button>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* 모의투자방 만들기 모달 */}\n        {showCreateModal && (\n          <div className=\"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4\">\n            <div className=\"bg-white rounded-2xl shadow-xl w-full max-w-md p-6\">\n              <h3 className=\"text-lg font-bold text-gray-900 mb-4\">\n                모의투자방 만들기\n              </h3>\n              <input\n                type=\"text\"\n                value={newRoomName}\n                onChange={(e) => setNewRoomName(e.target.value)}\n                placeholder=\"방 이름 (선택)\"\n                className=\"w-full px-4 py-3 border border-gray-300 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-teal-500 mb-4\"\n              />\n              <p className=\"text-xs text-gray-500 mb-4\">\n                비우면 자동으로 날짜 기반 이름이 붙습니다. 정원 3명이 모이면\n                모의투자를 시작할 수 있습니다.\n              </p>\n              <div className=\"flex gap-3\">\n                <button\n                  type=\"button\"\n                  onClick={() => {\n                    setShowCreateModal(false);\n                    setNewRoomName(\"\");\n                  }}\n                  className=\"flex-1 py-2.5 rounded-xl text-sm font-medium border border-gray-300 text-gray-700 hover:bg-gray-50 cursor-pointer\"\n                >\n                  취소\n                </button>\n                <button\n                  type=\"button\"\n                  onClick={handleCreateRoom}\n                  disabled={creating}\n                  className=\"flex-1 py-2.5 rounded-xl text-sm font-semibold bg-teal-500 text-white hover:bg-teal-600 disabled:opacity-50 cursor-pointer\"\n                >\n                  {creating ? \"만드는 중...\" : \"만들기\"}\n                </button>\n              </div>\n            </div>\n          </div>\n        )}\n      </main>\n    </div>\n  );\n}\n"],"names":["CAPACITY","MatchingRoomsPage","navigate","useNavigate","updateUserTeam","user","useAuth","rooms","setRooms","useState","loading","setLoading","actionRoomId","setActionRoomId","showCreateModal","setShowCreateModal","newRoomName","setNewRoomName","creating","setCreating","leaveConfirmRoomId","setLeaveConfirmRoomId","useEffect","getMatchingRooms","list","handleJoin","roomId","hasTeam","hasJoinedRoom","result","joinMatchingRoom","prev","r","handleLeave","leaveMatchingRoom","openLeaveConfirm","closeLeaveConfirm","handleStart","startMatchingRoom","teamIdToSet","handleCreateRoom","createMatchingRoom","isFull","room","isInRoom","m","myWaitingRoom","canJoinAnotherRoom","jsxs","jsx","Header","Fragment","full","busy","member","_","i","e"],"mappings":"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"}