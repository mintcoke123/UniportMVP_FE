import{u as G,f as H,r as s,n as D,o as J,p as Q,q as W,j as e,t as X,v as Y}from"./index-CzCyzncT.js";const E={upcoming:"예정",ongoing:"진행 중",ended:"종료"};function A(n){return new Date(n).toLocaleString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}function ee(){const n=G(),{user:b,logout:L}=H(),[i,M]=s.useState("competition"),[j,f]=s.useState([]),[I,T]=s.useState([]),[F,P]=s.useState([]),[R,$]=s.useState([]),[U,N]=s.useState(!0),[r,v]=s.useState(null),[z,c]=s.useState(!1),[d,x]=s.useState(null),[o,m]=s.useState(""),[h,p]=s.useState(""),[g,u]=s.useState(""),[w,l]=s.useState(""),[C,S]=s.useState(!1),k=()=>{D().then(f)};s.useEffect(()=>{N(!0),Promise.all([D(),J(),Q()]).then(([t,a,_])=>{f(t),P(a),$(_),t.length>0&&!r&&v(t[0].id)}).finally(()=>N(!1))},[]),s.useEffect(()=>{r&&W(r).then(T)},[r]);const B=()=>{L(),n("/login",{replace:!0})},K=()=>{x(null),m("");const t=new Date;t.setMonth(t.getMonth()+1);const a=new Date(t);a.setDate(a.getDate()+7),p(t.toISOString().slice(0,16)),u(a.toISOString().slice(0,16)),l(""),c(!0)},O=t=>{x(t),m(t.name),p(t.startDate.slice(0,16)),u(t.endDate.slice(0,16)),l(""),c(!0)},y=()=>{c(!1),x(null),l("")},q=async()=>{if(l(""),!o.trim()){l("대회 이름을 입력하세요.");return}S(!0);try{if(d){const t=await X(d.id,{name:o.trim(),startDate:h,endDate:g});t.success?(k(),y()):l(t.message)}else{const t=await Y({name:o.trim(),startDate:h,endDate:g});t.success?(k(),y()):l(t.message)}}finally{S(!1)}},V=[{key:"competition",label:"대회 관리"},{key:"teams",label:"팀 확인"},{key:"users",label:"유저 관리"}];return e.jsxs("div",{className:"min-h-screen bg-gray-100",children:[e.jsxs("header",{className:"bg-white border-b border-gray-200 sticky top-0 z-50",children:[e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{type:"button",onClick:()=>n("/"),className:"text-gray-600 hover:text-gray-900 text-sm font-medium",children:"← 서비스 홈"}),e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"관리자"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-sm text-gray-500",children:b?.nickname??b?.email}),e.jsx("button",{type:"button",onClick:B,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"로그아웃"})]})]}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 border-t border-gray-100",children:e.jsx("nav",{className:"flex gap-1 pt-2",children:V.map(({key:t,label:a})=>e.jsx("button",{type:"button",onClick:()=>M(t),className:`px-4 py-2.5 text-sm font-medium rounded-t-lg transition-colors ${i===t?"bg-white text-teal-600 border border-b-0 border-gray-200 -mb-px":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:a},t))})})]}),e.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:U?e.jsx("div",{className:"flex justify-center py-16 text-gray-500",children:"로딩 중..."}):e.jsxs(e.Fragment,{children:[i==="competition"&&e.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"대회 목록"}),e.jsx("button",{type:"button",onClick:K,className:"px-4 py-2 text-sm font-medium text-white bg-teal-500 hover:bg-teal-600 rounded-lg transition-colors",children:"대회 추가"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-gray-50 text-gray-600 text-sm font-medium",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3",children:"이름"}),e.jsx("th",{className:"px-6 py-3",children:"시작일"}),e.jsx("th",{className:"px-6 py-3",children:"종료일"}),e.jsx("th",{className:"px-6 py-3",children:"상태"}),e.jsx("th",{className:"px-6 py-3 w-24",children:"관리"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:j.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50/50",children:[e.jsx("td",{className:"px-6 py-4 font-medium text-gray-900",children:t.name}),e.jsx("td",{className:"px-6 py-4 text-gray-600 text-sm",children:A(t.startDate)}),e.jsx("td",{className:"px-6 py-4 text-gray-600 text-sm",children:A(t.endDate)}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex px-2.5 py-1 text-xs font-medium rounded-full ${t.status==="ongoing"?"bg-teal-100 text-teal-700":t.status==="upcoming"?"bg-amber-100 text-amber-700":"bg-gray-100 text-gray-600"}`,children:E[t.status]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("button",{type:"button",onClick:()=>O(t),className:"text-sm text-teal-600 hover:text-teal-700 font-medium",children:"수정"})})]},t.id))})]})})]}),i==="teams"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-100",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-3",children:"대회별 팀 (랭킹)"}),e.jsx("select",{value:r??"",onChange:t=>v(Number(t.target.value)||null),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-teal-500",children:j.map(t=>e.jsxs("option",{value:t.id,children:[t.name," (",E[t.status],")"]},t.id))})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-gray-50 text-gray-600 text-sm font-medium",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3",children:"순위"}),e.jsx("th",{className:"px-6 py-3",children:"팀명"}),e.jsx("th",{className:"px-6 py-3",children:"총 평가액"}),e.jsx("th",{className:"px-6 py-3",children:"수익률"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:I.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50/50",children:[e.jsxs("td",{className:"px-6 py-4 font-medium text-gray-900",children:[t.rank,"위"]}),e.jsx("td",{className:"px-6 py-4",children:t.groupName}),e.jsxs("td",{className:"px-6 py-4 text-gray-600",children:[t.totalValue.toLocaleString("ko-KR"),"원"]}),e.jsxs("td",{className:`px-6 py-4 font-medium ${t.profitLossPercentage>=0?"text-red-500":"text-blue-500"}`,children:[t.profitLossPercentage>=0?"+":"",t.profitLossPercentage,"%"]})]},t.teamId))})]})})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"매칭방 (팀 구성 대기)"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-gray-50 text-gray-600 text-sm font-medium",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3",children:"방 이름"}),e.jsx("th",{className:"px-6 py-3",children:"멤버"}),e.jsx("th",{className:"px-6 py-3",children:"상태"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:F.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50/50",children:[e.jsx("td",{className:"px-6 py-4 font-medium text-gray-900",children:t.name}),e.jsxs("td",{className:"px-6 py-4 text-gray-600",children:[t.memberCount,"/",t.capacity,"명 (",t.members.map(a=>a.nickname).join(", "),")"]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex px-2.5 py-1 text-xs font-medium rounded-full ${t.status==="full"?"bg-teal-100 text-teal-700":t.status==="started"?"bg-gray-100 text-gray-600":"bg-amber-100 text-amber-700"}`,children:t.status==="waiting"?"대기 중":t.status==="full"?"정원 참":"시작됨"})})]},t.id))})]})})]})]}),i==="users"&&e.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"유저 목록"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-gray-50 text-gray-600 text-sm font-medium",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3",children:"이메일"}),e.jsx("th",{className:"px-6 py-3",children:"닉네임"}),e.jsx("th",{className:"px-6 py-3",children:"팀"}),e.jsx("th",{className:"px-6 py-3",children:"역할"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:R.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50/50",children:[e.jsx("td",{className:"px-6 py-4 text-gray-900",children:t.email}),e.jsx("td",{className:"px-6 py-4 font-medium text-gray-900",children:t.nickname}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:t.teamId??"—"}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex px-2.5 py-1 text-xs font-medium rounded-full ${t.role==="admin"?"bg-purple-100 text-purple-700":"bg-gray-100 text-gray-600"}`,children:t.role==="admin"?"관리자":"일반"})})]},t.id))})]})})]})]})}),z&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-md p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:d?"대회 수정":"대회 추가"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"대회 이름"}),e.jsx("input",{type:"text",value:o,onChange:t=>m(t.target.value),placeholder:"예: 2025 봄 시즌 대회",className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-teal-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"시작일"}),e.jsx("input",{type:"datetime-local",value:h,onChange:t=>p(t.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-teal-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"종료일"}),e.jsx("input",{type:"datetime-local",value:g,onChange:t=>u(t.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-teal-500"})]}),w&&e.jsx("p",{className:"text-sm text-red-600",children:w})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{type:"button",onClick:y,className:"flex-1 py-2.5 text-sm font-medium text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50",children:"취소"}),e.jsx("button",{type:"button",onClick:q,disabled:C,className:"flex-1 py-2.5 text-sm font-semibold text-white bg-teal-500 rounded-lg hover:bg-teal-600 disabled:opacity-50",children:C?"저장 중...":d?"수정":"추가"})]})]})})]})}export{ee as default};
//# sourceMappingURL=page-DOkoe92y.js.map
